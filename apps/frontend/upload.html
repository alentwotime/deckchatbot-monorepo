<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Upload Drawing</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />
  <link rel="stylesheet" href="style.css" />
  <style>
    #dropZone {
      border: 2px dashed #ccc;
      padding: 40px;
      text-align: center;
      cursor: pointer;
      margin-bottom: 1rem;
      transition: all 0.3s ease;
    }
    #dropZone.dragover {
      background-color: #f0f8ff;
      border-color: #007bff;
    }
    #dropZone.error {
      border-color: #dc3545;
      background-color: #f8d7da;
    }
    #preview {
      max-width: 100%;
      margin-bottom: 1rem;
    }
    .file-info {
      background-color: #f8f9fa;
      border: 1px solid #dee2e6;
      border-radius: 0.375rem;
      padding: 1rem;
      margin-bottom: 1rem;
    }
    .progress-container {
      margin-top: 1rem;
    }
    .validation-message {
      margin-top: 0.5rem;
    }
    .supported-formats {
      font-size: 0.875rem;
      color: #6c757d;
      margin-top: 0.5rem;
    }
  </style>
</head>
<body>
  <div class="container mt-4">
    <h2 class="mb-3">Upload Drawing</h2>

    <!-- Validation Messages -->
    <div id="validationAlert" class="alert d-none" role="alert"></div>

    <!-- Drop Zone -->
    <div id="dropZone" class="mb-3">
      <i class="bi bi-cloud-upload fs-1 text-muted mb-2"></i>
      <p class="mb-2">Drag & drop your file here or click to select</p>
      <div class="supported-formats">
        Supported formats: Images (JPG, PNG, GIF, BMP, WEBP), PDFs, CAD files (DWG, DXF), and more
      </div>
    </div>

    <!-- File Input -->
    <input type="file" id="fileInput" 
           accept="image/*,.pdf,.dwg,.dxf,.svg,.eps,.ai,.cdr,.sketch" 
           class="d-none" 
           title="Drawing file input" />

    <!-- File Information -->
    <div id="fileInfo" class="file-info d-none">
      <h6>Selected File:</h6>
      <div id="fileName"></div>
      <div id="fileSize"></div>
      <div id="fileType"></div>
    </div>

    <!-- Preview -->
    <img id="preview" class="d-none" alt="preview" />

    <!-- Upload Controls -->
    <div class="mt-2">
      <button id="uploadButton" class="btn btn-primary" disabled>Upload</button>
      <button id="clearButton" class="btn btn-outline-secondary ms-2 d-none">Clear</button>
    </div>

    <!-- Progress Indicator -->
    <div id="progressContainer" class="progress-container d-none">
      <div class="d-flex justify-content-between align-items-center mb-2">
        <span id="progressText">Uploading...</span>
        <span id="progressPercent">0%</span>
      </div>
      <div class="progress">
        <div id="progressBar" class="progress-bar progress-bar-striped progress-bar-animated" 
             role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css"></script>
  <script src="upload.js"></script>
</body>
</html>
